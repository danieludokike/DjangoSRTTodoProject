{% extends 'base.html' %}

{% block title %}Task List{% endblock title %}

{% block content %}
    <div class="container">
        <h1 class="mb-4">To-Do List 📝</h1>

        <div class="card p-4 mb-5 shadow-sm">
            <h3 class="card-title mb-3">➕ Add New Task</h3>
            <form method="post" action="{% url 'task_list' %}"> 
                {% csrf_token %}
                
                {{ create_form.as_p }} 

                <button type="submit" class="btn btn-success mt-2">Create Task</button>
            </form>
        </div>

        <h2 class="mt-5 border-bottom pb-2">Existing Tasks</h2>
        
        {% if tasks %}
            <ul class="list-group">
                {% for task in tasks %}
                    <li class="list-group-item d-flex justify-content-between align-items-center 
                        {% if task.completed %}list-group-item-light{% endif %}">

                        <span class="fs-5 task-title {% if task.completed %}text-decoration-line-through text-muted{% endif %}">
                            **{{ task.title }}**
                        </span>

                        <div class="btn-group" role="group">
                            <a href="{% url 'task_update' pk=task.pk %}" class="btn btn-sm btn-info text-white">
                                Edit ✏️
                            </a>
                            <a href="{% url 'task_delete' pk=task.pk %}" class="btn btn-sm btn-danger">
                                Delete 🗑️
                            </a>
                        </div>
                    </li>
                {% endfor %}
            </ul>
        {% else %}
            <div class="alert alert-info mt-3">
                No tasks found. Get started with the form above!
            </div>
        {% endif %}
    </div>
{% endblock content %}